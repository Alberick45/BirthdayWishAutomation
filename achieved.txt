html

specialchars <!--  
    <form action="trial.php" method="post">
        <input type="hidden" name="action" value="append">
        Username: <input type="text" name="username" required><br>
        Password: <input type="password" name="password" required><br>
        <input type="submit" value="Append Data">
    </form>
    <br>

    <form action="trial.php" method="post">
        <input type="hidden" name="action" value="read">
        <input type="submit" value="Read File">
    </form> -->





php

/* // Function to append text to a file
function appendToFile($filename, $text) {
    $file = fopen($filename, "a");
    if ($file) {
        fwrite($file, $text);
        fclose($file);
        return "Data written to file successfully.";
    } else {
        return "Unable to open file!";
    }
}

// Function to read file into an array
function readFileToArray($filename) {
    if (file_exists($filename)) {
        $message = file($filename, FILE_IGNORE_NEW_LINES | FILE_SKIP_EMPTY_LINES);
        return $message;
    } else {
        return "File does not exist.";
    }
}

// Main logic
if (isset($_POST['action'])) {
    $action = $_POST['action'];
    
    switch ($action) {
        case 'append':
            if (isset($_POST['username']) && isset($_POST['password'])) {
                $username = htmlspecialchars($_POST['username']);
                $password = htmlspecialchars($_POST['password']);
            
                $text = "my name is $username and password is $password\n";
                echo appendToFile("trial.txt", $text);
            } else {
                echo "Username and password are required.";
            }
            break;
        
        case 'read':
            $messages = readFileToArray("trial.txt");
            if (is_array($messages)) {
                foreach ($messages as $index => $message) {
                    echo "Line $index: $message<br>";
                }
            } else {
                echo $messages; // Display error message if file does not exist
            }
            break;
        
        default:
            echo "Invalid action.";
            break;
    }
} else {
    echo "No action specified.";
}
 */





 birthday wishes

 General Happy Birthday:

"Happy Birthday, [Name]! ðŸŽ‰ Wishing you a fantastic day filled with love and joy. May your [Age]th year be your best one yet!"
Heartfelt Message:

"Dear [Name], on your special day, I want you to know how much you mean to me. 
Wishing you all the happiness in the world as you turn [Age] today. Have a wonderful birthday!"
Funny and Lighthearted:

"Hey [Name], itâ€™s your [Age]th birthday! Time to embrace the wisdom and embrace the wrinkles. 
Hope your day is filled with laughter and cake!"
Milestone Birthday:

"Happy [Age]th Birthday, [Name]! ðŸŽ‚ 
Youâ€™ve reached a wonderful milestone, and I hope this year brings you everything youâ€™ve been dreaming of."
Inspirational Message:

"Happy Birthday, [Name]! As you celebrate turning [Age], may this year bring you new opportunities and greater achievements. 
Hereâ€™s to a year of success and happiness!"
For a Close Friend:

"To my amazing friend [Name], Happy [Age]th Birthday! ðŸŽ‰
 Your friendship has been a true gift, and Iâ€™m so lucky to have you in my life. Letâ€™s make this year unforgettable!"
For a Family Member:

"Happy Birthday, [Name]! As you celebrate [Age] years of life, I want to thank you for being such an incredible 
[relation, e.g., brother, sister, etc.]. Hereâ€™s to many more years of joy and cherished moments together!"
Professional Colleague:

"Happy Birthday, [Name]! Wishing you a wonderful [Age]th birthday and a year full of professional success and personal happiness. 
Enjoy your special day!"
Romantic:

"Happy Birthday, [Name]! As you turn [Age] today, know that my love for you grows stronger every year. 
Hereâ€™s to many more birthdays together and a future filled with joy."
For a Child:

"Happy [Age]th Birthday, [Name]! ðŸŽˆ Youâ€™re growing up so fast and becoming even more amazing. 
Hope your day is filled with fun, laughter, and all your favorite things!"



 work required
 1. So a function to receive custom messages and input data from the forms to be sent to a person
2. Add a variety of custom messages 
3. Delete a message
4. Automatic and randomised sendingÂ ofÂ messages





<?php
require_once 'vendor/autoload.php';

use Twilio\Rest\Client;

// Your Account SID and Auth Token from twilio.com/console
$sid = '';
$token = '';
$client = new Client($sid, $token);

// Your Twilio phone number and the recipient's phone number
$from = '+19127375668';
$to = '+233 20 850 6317';

// Send the SMS
$client->messages->create(
    $to,
    [
        'from' => $from,
        'body' => 'Hello, this is a test message!'
    ]
);

echo "Message sent!";
?>













<?php
// Connect to the database
$con = mysqli_connect("localhost", "root", "", "birthday",3307);

// Check the connection
if (!$con) {
    die("Connection failed: " . mysqli_connect_error());
}

// Handle form submission
if (isset($_POST['submit'])) {
    // Sanitize and escape the input data
    $message = mysqli_real_escape_string($con, $_POST['message']);

    // Insert query
    $sql_insert = "INSERT INTO `custom_messages` (`cm_body`) VALUES ('$message')";

    // Execute the query and provide feedback
    if (mysqli_query($con, $sql_insert)) {
        echo '<script>alert("Message added successfully")</script>';
    } else {
        echo '<script>alert("Error: ' . mysqli_error($con) . '")</script>';
    }
}

// Fetch messages for the dropdown
$sql = "SELECT * FROM `custom_messages`";
$all_messages = mysqli_query($con, $sql);

// Check for query errors
if (!$all_messages) {
    die("Query failed: " . mysqli_error($con));
}
?>

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">    
    <title>Message Form</title>
</head>
<body>
    <form method="POST">
        <label for="message">Message:</label>
        <input type="text" name="message" required><br>
        <label for="messages">Select a message:</label>
        <select name="messages" id="messages">
            <?php 
            // Populate dropdown with messages
            while ($message = mysqli_fetch_array($all_messages, MYSQLI_ASSOC)): 
            ?>
                <option value="<?php echo $message["cm_id"]; ?>">
                    <?php echo $message["cm_body"]; ?>
                </option>
            <?php 
            endwhile; 
            ?>
        </select>
        <br>
        <input type="submit" value="Submit" name="submit">
    </form>
    <br>
</body>
</html>


/* require_once 'vendor/autoload.php';

use Twilio\Rest\Client;

// Your Account SID and Auth Token from twilio.com/console
$sid = 'AC05bfd9499c87f3d78f952369ab6243c2';
$token = '8fc5aa4ba108b942e641d60f54a918c9';
$client = new Client($sid, $token);

// Your Twilio phone number and the recipient's phone number
$from = '+19127375668';
$to = '+233208506317';

// Send the SMS
$client->messages->create(
    $to,
    [
        'from' => $from,
        'body' => 'Hello, this is a test message!'
    ]
);

echo "Message sent!";
 */




 SELECT c_id from contacts where c_dob between curdate() and date_add(curdate(), interval 15 day)

 // Your Hubtel credentials
            $clientId = 'kcaliqtv';
            $clientSecret = 'kzaxioop';

            // Message details
            $from = 'SalemInc';
            $to = $recipient_phone; // Ensure the number is in international format without the '+'
            $message = $personalized_message;

            // Prepare the payload
            $data = array(
                'From' => $from,
                'To' => $to,
                'Content' => $message,
                'ClientReference' => $registererid // Optional
            );

            $data_string = json_encode($data);

            // Initialize cURL
            $ch = curl_init('https://smsc.hubtel.com/v1/messages/send');

            // Set cURL options
            curl_setopt($ch, CURLOPT_HTTPHEADER, array(
                'Content-Type: application/json',
                'Authorization: Basic ' . base64_encode($clientId . ':' . $clientSecret),
            ));
            curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
            curl_setopt($ch, CURLOPT_POST, true);
            curl_setopt($ch, CURLOPT_POSTFIELDS, $data_string);

            // Execute cURL request
            $response = curl_exec($ch);

            // Check for cURL errors
            if ($response === false) {
                $error = curl_error($ch);
                curl_close($ch);
                die('cURL error: ' . $error);
            }

            // Close cURL
            curl_close($ch);

            // Decode and handle the response
            $responseData = json_decode($response, true);

            // Print the full response for debugging
            // var_dump($responseData); // Uncomment this line if you need to debug the response

            // Check the response status
            if (isset($responseData['status']) && $responseData['status'] === 0) {
                echo 'Message sent successfully!';
            } else {
                echo 'Failed to send message: ' . (isset($responseData['statusDescription']) ? $responseData['statusDescription'] : 'Unknown error');
            }
                



    <?php
require("config.php");

$userid = $_SESSION['user id'];

$sql_options = $conn->prepare("SELECT m_id, m_body FROM messages WHERE m_type = 'custom' AND m_ruid = ?");
$sql_options->bind_param("i", $userid);
$sql_options->execute();
$result = $sql_options->get_result();

$cmdata = "";

if ($result->num_rows > 0) {
    while ($row = $result->fetch_assoc()) {
        $messageID = htmlspecialchars($row["m_id"]);
        $messageBody = htmlspecialchars($row["m_body"]);
        
        $cmdata .= '
        <tr class="table-secondary"> 
            <th id="' . $messageID . '" scope="row"> 
                <!-- Trigger modal with dynamic data -->
                <a href="?edit_id=' . $messageID . '&edit_body=' . urlencode($messageBody) . '" class="btn btn-outline-primary" data-bs-toggle="modal" data-bs-target="#update-message-modal">Edit</a> |
                <a class="btn btn-outline-danger" href="messages.php?action=delete&mid=' . $messageID . '" role="button">Delete</a>
            </th> 
            <td>' . $messageBody . '</td>
        </tr>';
    }
    echo $cmdata;
} else {
    echo '<tr><td colspan="2">No messages found</td></tr>';
}

$sql_options->close();
$conn->close();
?>

 <!-- Update messages modal -->
<div class="modal fade" id="update-message-modal" tabindex="-1" aria-labelledby="update-message-modal-title" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered modal-dialog-scrollable">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="update-message-modal-title">Update Message</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <form action="messages.php" method="post" id="custom_message_update">
                    <input type="hidden" name="updatemessage" value="Update">
                    <div class="form-floating">
                        <textarea class="form-control" placeholder="Type your custom message" id="floatingTextarea" name="changed_message"><?php echo isset($_GET['edit_body']) ? htmlspecialchars($_GET['edit_body']) : ''; ?></textarea>
                        <label for="floatingTextarea">Update your message</label>
                    </div>
                    <input type="hidden" name="umsgid" value="<?php echo isset($_GET['edit_id']) ? htmlspecialchars($_GET['edit_id']) : ''; ?>">
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                <button type="submit" form="custom_message_update" class="btn btn-outline-danger" name="Update_message" id="changed_message">Update</button>
            </div>
        </div>
    </div>
</div>



















$selected = ($code == $ucountrycode) ? 'selected' : '';
                                            echo "<option value=\"$code\" $selected>$name</option>";














<!-- this is the contacts section -->
<div class="tab-pane fade" id="contacts" role="tabpanel" aria-labelledby="nav-contact-tab">
    <div class="bd-example">
        <table class="table table-hover">
            <thead>
                <tr>
                    <th scope="col">Actions</th>
                    <th scope="col">First Name</th>
                    <th scope="col">Last Name</th>
                    <th scope="col">Phone Number</th>
                    <th scope="col">Birthdate</th>
                    <th scope="col">Message to be sent</th>
                </tr>
            </thead>
            <tbody>
                <?php 
                require("config.php");

                $sql_options = "SELECT c_id, cf_name, cl_name, c_cntcode, c_pnum, c_dob, c_mid FROM contacts WHERE c_ruid = $userid";
                $result = $conn->query($sql_options);

                if ($result->num_rows > 0) {
                    while ($row = $result->fetch_assoc()) {
                        $contactid = htmlspecialchars($row["c_id"]);
                        $ufirstname = htmlspecialchars($row["cf_name"]);
                        $ulastname = htmlspecialchars($row["cl_name"]);
                        $udob = htmlspecialchars($row["c_dob"]);
                        $uphonenumber = htmlspecialchars($row["c_pnum"]);
                        $ucountrycode = htmlspecialchars($row["c_cntcode"]);
                        $ucmessageid = htmlspecialchars($row["c_mid"]);
                        ?>
                        <tr class="table-secondary">
                            <th scope="row" id='<?php echo $contactid; ?>'>
                                <a class="btn btn-outline-primary" data-bs-toggle="modal" data-bs-target="#update-contact-modal-<?php echo $contactid?>" role="button">Edit</a> |
                                <a class="btn btn-outline-danger" href="contacts.php?action=delete&cid=<?php echo $contactid; ?>" role="button">Delete</a>
                            </th>
                            <td><?php echo $ufirstname; ?></td>
                            <td><?php echo $ulastname; ?></td>
                            <td><?php echo htmlspecialchars($ucountrycode . " " . $uphonenumber); ?></td>
                            <td><?php echo $udob; ?></td>
                            <td><?php echo $ucmessageid; ?></td>
                        </tr>
                        <!-- Modal for updating contacts -->
                        <div class="modal fade" id="update-contact-modal-<?php echo $contactid?>" tabindex="-1" aria-labelledby="update-contact-modal-title-<?php echo $contactid?>" aria-hidden="true">
                            <div class="modal-dialog modal-dialog-centered modal-dialog-scrollable">
                                <div class="modal-content">
                                    <div class="modal-header">
                                        <h5 class="modal-title" id="update-contact-modal-title-<?php echo $contactid?>">Update Contact</h5>
                                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                                    </div>
                                    <div class="modal-body">
                                        <form action="contacts.php" method='POST' id="update-contact" class="needs-validation" novalidate>
                                            <input type="hidden" name="contactlist" value="Update">
                                            <div class="row g-3">
                                                <div class="col-6">
                                                    <input type="text" class="form-control" placeholder="First name" aria-label="First name" name="u_cfname" value="<?php echo $ufirstname?>">
                                                </div>
                                                <div class="col-6">
                                                    <input type="text" class="form-control" placeholder="Last name" aria-label="Last name" name="u_clname" value="<?php echo $ulastname?>">
                                                </div>
                                                <div class="col-4">
                                                <select id="country_code" required class="form-select" name="u_ccntcd">
                                                  <option selected>Country code</option>
                                                  <?php
                                                  $countryCodes = [
                                                    "+233" => "Ghana (+233)",
                                                    "93" => "Afghanistan (+93)",
                                                    "355" => "Albania (+355)",
                                                    "213" => "Algeria (+213)",
                                                    "1684" => "American Samoa (+1684)",
                                                    "376" => "Andorra (+376)",
                                                    "244" => "Angola (+244)",
                                                    "1264" => "Anguilla (+1264)",
                                                    "672" => "Antarctica (+672)",
                                                    "1268" => "Antigua and Barbuda (+1268)",
                                                    "54" => "Argentina (+54)",
                                                    "374" => "Armenia (+374)",
                                                    "297" => "Aruba (+297)",
                                                    "61" => "Australia (+61)",
                                                    "43" => "Austria (+43)",
                                                    "994" => "Azerbaijan (+994)",
                                                    "1242" => "Bahamas (+1242)",
                                                    "973" => "Bahrain (+973)",
                                                    "880" => "Bangladesh (+880)",
                                                    "1246" => "Barbados (+1246)",
                                                    "375" => "Belarus (+375)",
                                                    "32" => "Belgium (+32)",
                                                    "501" => "Belize (+501)",
                                                    "229" => "Benin (+229)",
                                                    "1441" => "Bermuda (+1441)",
                                                    "975" => "Bhutan (+975)",
                                                    "591" => "Bolivia (+591)",
                                                    "387" => "Bosnia and Herzegovina (+387)",
                                                    "267" => "Botswana (+267)",
                                                    "55" => "Brazil (+55)",
                                                    "246" => "British Indian Ocean Territory (+246)",
                                                    "1284" => "British Virgin Islands (+1284)",
                                                    "673" => "Brunei (+673)",
                                                    "359" => "Bulgaria (+359)",
                                                    "226" => "Burkina Faso (+226)",
                                                    "257" => "Burundi (+257)",
                                                    "855" => "Cambodia (+855)",
                                                    "237" => "Cameroon (+237)",
                                                    "1" => "Canada (+1)",
                                                    "238" => "Cape Verde (+238)",
                                                    "1345" => "Cayman Islands (+1345)",
                                                    "236" => "Central African Republic (+236)",
                                                    "235" => "Chad (+235)",
                                                    "56" => "Chile (+56)",
                                                    "86" => "China (+86)",
                                                    "+61" => "Christmas Island (+61)",
                                                    /* "+61" => "Cocos Islands (+61)", */
                                                    "57" => "Colombia (+57)",
                                                    "269" => "Comoros (+269)",
                                                    "682" => "Cook Islands (+682)",
                                                    "506" => "Costa Rica (+506)",
                                                    "385" => "Croatia (+385)",
                                                    "53" => "Cuba (+53)",
                                                    "599" => "Curacao (+599)",
                                                    "357" => "Cyprus (+357)",
                                                    "420" => "Czech Republic (+420)",
                                                    "45" => "Denmark (+45)",
                                                    "253" => "Djibouti (+253)",
                                                    "1767" => "Dominica (+1767)",
                                                    "1849" => "Dominican Republic (+1849)",
                                                    "593" => "Ecuador (+593)",
                                                    "20" => "Egypt (+20)",
                                                    "503" => "El Salvador (+503)",
                                                    "240" => "Equatorial Guinea (+240)",
                                                    "291" => "Eritrea (+291)",
                                                    "372" => "Estonia (+372)",
                                                    "251" => "Ethiopia (+251)",
                                                    "500" => "Falkland Islands (+500)",
                                                    "298" => "Faroe Islands (+298)",
                                                    "679" => "Fiji (+679)",
                                                    "358" => "Finland (+358)",
                                                    "33" => "France (+33)",
                                                    "594" => "French Guiana (+594)",
                                                    "689" => "French Polynesia (+689)",
                                                    "241" => "Gabon (+241)",
                                                    "220" => "Gambia (+220)",
                                                    "995" => "Georgia (+995)",
                                                    "49" => "Germany (+49)",
                                                    "350" => "Gibraltar (+350)",
                                                    "30" => "Greece (+30)",
                                                    "299" => "Greenland (+299)",
                                                    "1473" => "Grenada (+1473)",
                                                    "590" => "Guadeloupe (+590)",
                                                    "1671" => "Guam (+1671)",
                                                    "502" => "Guatemala (+502)",
                                                    "224" => "Guinea (+224)",
                                                    "245" => "Guinea-Bissau (+245)",
                                                    "592" => "Guyana (+592)",
                                                    "509" => "Haiti (+509)",
                                                    "504" => "Honduras (+504)",
                                                    "852" => "Hong Kong (+852)",
                                                    "36" => "Hungary (+36)",
                                                    "354" => "Iceland (+354)",
                                                    "91" => "India (+91)",
                                                    "62" => "Indonesia (+62)",
                                                    "98" => "Iran (+98)",
                                                    "964" => "Iraq (+964)",
                                                    "353" => "Ireland (+353)",
                                                    "972" => "Israel (+972)",
                                                    "39" => "Italy (+39)",
                                                    "225" => "Ivory Coast (+225)",
                                                    "1876" => "Jamaica (+1876)",
                                                    "81" => "Japan (+81)",
                                                    "962" => "Jordan (+962)",
                                                    "7" => "Kazakhstan (+7)",
                                                    "254" => "Kenya (+254)",
                                                    "686" => "Kiribati (+686)",
                                                    "383" => "Kosovo (+383)",
                                                    "965" => "Kuwait (+965)",
                                                    "996" => "Kyrgyzstan (+996)",
                                                    "856" => "Laos (+856)",
                                                    "371" => "Latvia (+371)",
                                                    "961" => "Lebanon (+961)",
                                                    "266" => "Lesotho (+266)",
                                                    "231" => "Liberia (+231)",
                                                    "218" => "Libya (+218)",
                                                    "423" => "Liechtenstein (+423)",
                                                    "370" => "Lithuania (+370)",
                                                    "352" => "Luxembourg (+352)",
                                                    "853" => "Macau (+853)",
                                                    "389" => "Macedonia (+389)",
                                                    "261" => "Madagascar (+261)",
                                                    "265" => "Malawi (+265)",
                                                    "60" => "Malaysia (+60)",
                                                    "960" => "Maldives (+960)",
                                                    "223" => "Mali (+223)",
                                                    "356" => "Malta (+356)",
                                                    "692" => "Marshall Islands (+692)",
                                                    "596" => "Martinique (+596)",
                                                    "222" => "Mauritania (+222)",
                                                    "230" => "Mauritius (+230)",
                                                    "262" => "Mayotte (+262)",
                                                    "52" => "Mexico (+52)",
                                                    "691" => "Micronesia (+691)",
                                                    "373" => "Moldova (+373)",
                                                    "377" => "Monaco (+377)",
                                                    "976" => "Mongolia (+976)",
                                                    "382" => "Montenegro (+382)",
                                                    "1664" => "Montserrat (+1664)",
                                                    "212" => "Morocco (+212)",
                                                    "258" => "Mozambique (+258)",
                                                    "95" => "Myanmar (+95)",
                                                    "264" => "Namibia (+264)",
                                                    "674" => "Nauru (+674)",
                                                    "977" => "Nepal (+977)",
                                                    "31" => "Netherlands (+31)",
                                                    "687" => "New Caledonia (+687)",
                                                    "64" => "New Zealand (+64)",
                                                    "505" => "Nicaragua (+505)",
                                                    "227" => "Niger (+227)",
                                                    "234" => "Nigeria (+234)",
                                                    "683" => "Niue (+683)",
                                                    "850" => "North Korea (+850)",
                                                    "1670" => "Northern Mariana Islands (+1670)",
                                                    "47" => "Norway (+47)",
                                                    "968" => "Oman (+968)",
                                                    "92" => "Pakistan (+92)",
                                                    "680" => "Palau (+680)",
                                                    "970" => "Palestine (+970)",
                                                    "507" => "Panama (+507)",
                                                    "675" => "Papua New Guinea (+675)",
                                                    "595" => "Paraguay (+595)",
                                                    "51" => "Peru (+51)",
                                                    "63" => "Philippines (+63)",
                                                    "48" => "Poland (+48)",
                                                    "351" => "Portugal (+351)",
                                                    "1787" => "Puerto Rico (+1787)",
                                                    "974" => "Qatar (+974)",
                                                    "242" => "Republic of the Congo (+242)",
                                                    "+262" => "Reunion (+262)",
                                                    "40" => "Romania (+40)",
                                                    "+7" => "Russia (+7)",
                                                    "250" => "Rwanda (+250)",
                                                    "290" => "Saint Helena (+290)",
                                                    "1869" => "Saint Kitts and Nevis (+1869)",
                                                    "1758" => "Saint Lucia (+1758)",
                                                    "508" => "Saint Pierre and Miquelon (+508)",
                                                    "1784" => "Saint Vincent and the Grenadines (+1784)",
                                                    "685" => "Samoa (+685)",
                                                    "378" => "San Marino (+378)",
                                                    "239" => "Sao Tome and Principe (+239)",
                                                    "966" => "Saudi Arabia (+966)",
                                                    "221" => "Senegal (+221)",
                                                    "381" => "Serbia (+381)",
                                                    "248" => "Seychelles (+248)",
                                                    "232" => "Sierra Leone (+232)",
                                                    "65" => "Singapore (+65)",
                                                    "1721" => "Sint Maarten (+1721)",
                                                    "421" => "Slovakia (+421)",
                                                    "386" => "Slovenia (+386)",
                                                    "677" => "Solomon Islands (+677)",
                                                    "252" => "Somalia (+252)",
                                                    "27" => "South Africa (+27)",
                                                    "82" => "South Korea (+82)",
                                                    "211" => "South Sudan (+211)",
                                                    "34" => "Spain (+34)",
                                                    "94" => "Sri Lanka (+94)",
                                                    "249" => "Sudan (+249)",
                                                    "597" => "Suriname (+597)",
                                                    "268" => "Swaziland (+268)",
                                                    "46" => "Sweden (+46)",
                                                    "41" => "Switzerland (+41)",
                                                    "963" => "Syria (+963)",
                                                    "886" => "Taiwan (+886)",
                                                    "992" => "Tajikistan (+992)",
                                                    "255" => "Tanzania (+255)",
                                                    "66" => "Thailand (+66)",
                                                    "228" => "Togo (+228)",
                                                    "690" => "Tokelau (+690)",
                                                    "676" => "Tonga (+676)",
                                                    "1868" => "Trinidad and Tobago (+1868)",
                                                    "216" => "Tunisia (+216)",
                                                    "90" => "Turkey (+90)",
                                                    "993" => "Turkmenistan (+993)",
                                                    "1649" => "Turks and Caicos Islands (+1649)",
                                                    "688" => "Tuvalu (+688)",
                                                    "256" => "Uganda (+256)",
                                                    "380" => "Ukraine (+380)",
                                                    "971" => "United Arab Emirates (+971)",
                                                    "44" => "United Kingdom (+44)",
                                                    "+1" => "United States (+1)",
                                                    "598" => "Uruguay (+598)",
                                                    "998" => "Uzbekistan (+998)",
                                                    "678" => "Vanuatu (+678)",
                                                    "379" => "Vatican (+379)",
                                                    "58" => "Venezuela (+58)",
                                                    "84" => "Vietnam (+84)",
                                                    "+1284" => "British Virgin Islands (+1284)",
                                                    "1340" => "U.S. Virgin Islands (+1340)",
                                                    "681" => "Wallis and Futuna (+681)",
                                                    "+212" => "Western Sahara (+212)",
                                                    "967" => "Yemen (+967)",
                                                    "260" => "Zambia (+260)",
                                                    "263" => "Zimbabwe (+263)"
                                                  ];

                                                  foreach ($countryCodes as $code => $name) {
                                                    $selected = ($code == $ucountrycode) ? 'selected' : '';
                                                    echo "<option value=\"$code\" $selected>$name</option>";
                                                  }
                                                  ?>
                                                </select>
                                                </div>
                                                <div class="col-8">
                                                    <input type="text" class="form-control" placeholder="Phone" id="phone" name="u_cphone" required value="<?php echo $uphonenumber?>">
                                                    <div class="invalid-feedback">
                                                        Please enter the person's phone number.
                                                    </div>
                                                </div>
                                                <div class="col-12">
                                                    <input type="date" class="form-control" id="date_of_birth" name="u_cdob" required value="<?php echo $udob?>">
                                                    <div class="invalid-feedback">
                                                        Please input the date of birth.
                                                    </div>
                                                </div>
                                                <div class="col-12">
                                                    <label for="messages">Messages:</label>
                                                    <select id="messages" name="u_cmsgid" class="form-select form-select-sm" required>
                  <!-- Options loaded dynamically -->
                  
                  <?php
                  require("config.php");
                  $user_id = $_SESSION['user id'];
                  $sql_options = "SELECT m_id, m_body FROM messages WHERE m_type='sample' OR m_ruid = '$user_id'";
                  $result = $conn->query($sql_options);

                  $options = "";

                  if ($result->num_rows > 0) {
                    while ($row = $result->fetch_assoc()) {
                      $selected = ($row["m_id"] == $umessageid) ? 'selected' : '';
                      $options .= '<option value="' . $row["m_id"] . '" ' . $selected . '>' . htmlspecialchars($row["m_body"]) . '</option>';
                    }
                  } else {
                    $options .= '<option value="">No options available</option>';
                  }

                  echo $options;
                  ?>
                    <option value="add_new">Add new message</option>
                </select>
                                                </div>
                                            </div>
                                        </form>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <?php
                    }
                } else {
                    echo "<tr><td colspan='6'>No contacts found</td></tr>";
                }
                $conn->close();
                ?>
                </tbody><button type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#contact-modal"  >
                Add contact
              </button>
              </table>
              
            </div>
          </div>
          
        </div>
      </div>
    </div> 